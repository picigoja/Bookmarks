:root {
  --font-family: "Segoe UI", system-ui, -apple-system, sans-serif;
  --sidebar-width: 17.5rem;
  --border-radius-lg: 1rem;
  --border-radius-md: 0.5rem;
  --border-radius-sm: 0.25rem;

  --border-width: 1px;
  --transition-spring: 0.25s cubic-bezier(0.4, 0, 0.2, 1);

  --color-red: #ff6b6b;
  --color-green: #51cf66;
  --color-blue: #339af0;
  --color-yellow: #fcc419;
  --color-purple: #b197fc;
  --color-orange: #ff922b;

  --bg-body: #f0f2f5;
  --glass-opacity: 0.65;
  --glass-border-opacity: 0.4;
  --glass-blur: 1rem;
  --bg-surface: rgba(255, 255, 255, var(--glass-opacity));
  --bg-surface-hover: rgba(255, 255, 255, 0.8);
  --border: rgba(255, 255, 255, var(--glass-border-opacity));
  --border-strong: rgba(255, 255, 255, 0.6);
  --bg-glass: rgba(255, 255, 255, 0.3);
  --glass-blur-sm: 0.625rem;
  --text-main: #2d3436;
  --text-muted: #636e72;
  --shadow-soft: rgba(0, 0, 0, 0.05);
  --shadow-strong: rgba(0, 0, 0, 0.1);

  --blob-day-start: #f29f64;
  --blob-day-end: #eccb6f;
  --blob-night-start: #2b2f77;
  --blob-night-end: #070b34;
  --switch-gradient: linear-gradient(135deg, var(--blob-day-start), var(--blob-day-end));

  --theme-color: var(--color-red);
  --noise-pattern: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='0.05'/%3E%3C/svg%3E");

  --z-index-base: 1;
  --z-index-active: 5;
  --z-index-sticky: 20;
  --glider-bg: rgba(0, 0, 0, 0.1);
}

:root.theme-dark {
  --bg-body: #121212;
  --bg-surface: rgba(30, 30, 30, var(--glass-opacity));
  --bg-surface-hover: rgba(50, 50, 50, 0.8);
  --border: rgba(255, 255, 255, 0.1);
  --border-strong: rgba(255, 255, 255, 0.15);
  --bg-glass: rgba(0, 0, 0, 0.3);
  --text-main: #dfe6e9;
  --text-muted: #b2bec3;
  --shadow-soft: rgba(0, 0, 0, 0.2);
  --shadow-strong: rgba(0, 0, 0, 0.5);

  --switch-gradient: linear-gradient(135deg, var(--blob-night-start), var(--blob-night-end));
  --glider-bg: rgba(255, 255, 255, 0.1);
}

:root.accent-red {
  --theme-color: var(--color-red);
}

:root.accent-green {
  --theme-color: var(--color-green);
}

:root.accent-blue {
  --theme-color: var(--color-blue);
}

:root.accent-yellow {
  --theme-color: var(--color-yellow);
}

:root.accent-purple {
  --theme-color: var(--color-purple);
}

:root.accent-orange {
  --theme-color: var(--color-orange);
}

* {
  box-sizing: border-box;
}

body {
  margin: 0;
  font-family: var(--font-family);
  color: var(--text-main);
  min-height: 100vh;
  transition: background 0.3s ease, color 0.3s ease;

  --bg-50: color-mix(in srgb, var(--bg-body) 40%, var(--theme-color));
  --bg-10: color-mix(in srgb, var(--bg-body) 10%, var(--theme-color));
  --bg-90: color-mix(in srgb, var(--bg-body) 90%, var(--theme-color));
  background-color: var(--bg-body);
  background: linear-gradient(-45deg, var(--bg-body), var(--bg-50), var(--bg-body));
  background-size: 400% 400%;
  background-attachment: fixed;
  animation: gradient 15s ease infinite;
}

@keyframes gradient {
  0% {
    background-position: 0% 50%;
  }
  50% {
    background-position: 100% 50%;
  }
  100% {
    background-position: 0% 50%;
  }
}

/* --- New Utility Classes --- */

.surface-glass {
  background-color: var(--bg-glass);
  background-image: var(--noise-pattern);
  backdrop-filter: blur(var(--glass-blur-sm));
  -webkit-backdrop-filter: blur(var(--glass-blur-sm));
  border: var(--border-width) solid var(--border);
}

.switch-control {
  --height: 2.875rem;
  --pad: 0.25rem;
  position: relative;
  display: flex;
  align-items: center;
  height: var(--height);
  padding: var(--pad);
  background: var(--bg-body);
  border: var(--border-width) solid var(--border);
  border-radius: var(--border-radius-md);
  cursor: pointer;
  user-select: none;
  width: 100%;
  color: inherit;
  font: inherit;
}

.glider-item {
  position: absolute;
  top: 0;
  left: 0;
  transform: translate(var(--x, 0px), var(--y, 0px));
  border-radius: var(--border-radius-md);
  pointer-events: none;
  transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1), width 0.3s ease, height 0.3s ease, opacity 0.15s ease, background 0.3s ease, box-shadow 0.3s ease, border-color 0.3s ease;
}

.glider-glass {
  z-index: var(--z-index-base);
  background: var(--glider-bg);
  border: var(--border-width) solid var(--border-strong);
  box-shadow: 0 0.25rem 0.75rem var(--shadow-soft);
  backdrop-filter: blur(0.3125rem);
  -webkit-backdrop-filter: blur(0.3125rem);
}

.glider-ghost {
  z-index: 0;
  opacity: 0;
}

.app {
  display: flex;
  min-height: 100vh;
}

.sidebar {
  width: var(--sidebar-width);
  padding: 2rem;
  display: flex;
  flex-direction: column;
  flex-shrink: 0;
  border-right: var(--border-width) solid var(--border);
  background-color: var(--bg-surface);
  background-image: var(--noise-pattern);
  backdrop-filter: blur(var(--glass-blur));
  -webkit-backdrop-filter: blur(var(--glass-blur));
  box-shadow: 0.125rem 0 1.25rem rgba(0, 0, 0, 0.05);
  position: sticky;
  top: 0;
  max-height: 100vh;
  overflow-y: auto;
}

.sidebar-header {
  display: flex;
  flex-direction: column;
  gap: 1.5rem;
  margin-bottom: 2rem;
  position: relative;
  z-index: var(--z-index-sticky);
}


.content {
  flex: 1;
  padding: 3rem;
  overflow-y: auto;
  container-type: inline-size;
}


.content-inner {
  max-width: 75rem;
  margin: 0 auto;
}

.content-header {
  display: flex;
  justify-content: space-between;
  align-items: flex-end;
  margin-bottom: 3rem;
  border-bottom: var(--border-width) solid var(--border);
  padding-bottom: 2rem;
}

.content-header h1 {
  margin: 0 0 0.5rem;
  font-size: 2.5rem;
  font-weight: 700;
  letter-spacing: -0.0625rem;
}

.content-header p {
  color: var(--text-muted);
  margin: 0;
  font-size: 1.1rem;
}

/* --- Day/Night Switch --- */
#dayNightSwitch::before {
  content: "";
  position: absolute;
  top: var(--pad);
  bottom: var(--pad);
  left: var(--pad);
  width: calc(50% - var(--pad));
  border-radius: var(--border-radius-md);
  background: var(--switch-gradient);
  transition: transform var(--transition-spring);
  box-shadow: 0 0.125rem 0.3125rem var(--shadow-strong);
  z-index: var(--z-index-base);
}

#dayNightSwitch[aria-pressed="true"]::before {
  transform: translateX(100%);
}

/* Shared label styles for switches */
.sw-lbl {
  flex: 1;
  z-index: var(--z-index-active);
  display: flex;
  position: relative;
  align-items: center;
  justify-content: center;
  font-weight: 600;
  font-size: 0.9rem;
  color: var(--text-muted);
  transition: color 0.3s ease;
}

#dayNightSwitch[aria-pressed="false"] #sw-lbl-day,
#dayNightSwitch[aria-pressed="true"] #sw-lbl-night {
  color: var(--text-main);
  text-shadow: 0 0.0625rem 0.125rem rgba(0, 0, 0, 0.25);
}

/* --- Theme Picker --- */
#themePickerSet {
  display: grid;
  grid-template-columns: 1fr;
  padding: 0.75rem;
  border-radius: var(--border-radius-md);
  position: relative;
  margin: 0;
}


#themePickerOptions {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 0.5rem;
  grid-area: 1 / 1;
}


.tp-input {
  position: absolute;
  opacity: 0;
  width: 1px;
  height: 1px;
  margin: -1px;
  padding: 0;
  border: 0;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
}

.tp-input:focus-visible + .tp-input-lbl {
  outline: 0.125rem solid var(--theme-color);
  outline-offset: 0.125rem;
}


.tp-input-lbl {
  position: relative;
  z-index: var(--z-index-active);
  cursor: pointer;
  padding: 0.5rem;
  text-align: center;
  font-weight: 600;
  font-size: 0.9rem;
  color: var(--accent-color);
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.375rem;
  border-radius: var(--border-radius-md);
  transition: color 0.2s, text-shadow 0.2s;
}

.tp-input-lbl::before {
  content: "";
  display: block;
  width: 0.5rem;
  height: 0.5rem;
  border-radius: 50%;
  background-color: var(--accent-color);
  box-shadow: 0 0 0 0.0625rem var(--accent-color);
}

.tp-input-lbl:hover {
  text-shadow: 0 0 0.625rem currentColor;
}

.tp-input:checked + .tp-input-lbl {
  color: var(--text-main);
}

.tp-input:checked + .tp-input-lbl:hover {
  text-shadow: 0 0 0.75rem var(--theme-color);
}

/* Label colors mapped by ID suffix or specific class if needed, 
   but here we rely on the HTML structure or specific IDs if strictly required.
   Assuming the HTML IDs match the logic below or we use the generic class + modifier approach.
   The HTML uses IDs like themeRedLabel. Let's map the modifiers to the IDs for safety 
   or keep the generic modifier classes if they are added dynamically. 
   The HTML provided has IDs but no modifier classes like --red. 
   We will target the IDs directly for the colors. */

#themeRedLabel {
  --accent-color: var(--color-red);
}

#themeGreenLabel {
  --accent-color: var(--color-green);
}

#themeBlueLabel {
  --accent-color: var(--color-blue);
}

#themeYellowLabel {
  --accent-color: var(--color-yellow);
}

#themePurpleLabel {
  --accent-color: var(--color-purple);
}

#themeOrangeLabel {
  --accent-color: var(--color-orange);
}

/* Specific variable mapping for the shared class if JS uses specific vars */
#themePickerGlider, #themePickerGliderHover { --x: var(--glider-x); --y: var(--glider-y); width: var(--glider-width); height: var(--glider-height); }
#groupNavGlider, #groupNavGliderHover { --x: var(--nav-glider-x); --y: var(--nav-glider-y); width: var(--nav-glider-width); height: var(--nav-glider-height); }

#themePickerGliderHover {
  background: color-mix(in srgb, #808080 5%, transparent);
  border: var(--border-width) solid color-mix(in srgb, #808080 15%, transparent);
  box-shadow:
    0 0 0 var(--border-width) color-mix(in srgb, #808080 45%, transparent),
    0 0.5rem 1.125rem -0.875rem #808080;
}

/* --- Navigation --- */
.nav {
  display: flex;
  flex-direction: column;
  gap: 0.25rem;
  padding: 0.75rem;
  border-radius: var(--border-radius-md);
  position: relative;
}

/* Keep nav text above the sibling gliders to avoid blurred label text */
#groupNav {
  z-index: 2;
}

#groupNavGlider,
#groupNavGliderHover {
  z-index: 1;
}


.nav-option {
  display: flex;
  align-items: center;
  gap: 0.625rem;
  width: 100%;
  padding: 0.625rem 1rem;
  cursor: pointer;
  border-radius: var(--border-radius-md);
  color: var(--text-muted);
  font-weight: 600;
  font-size: 0.9rem;
  border: none;
  background: none;
  text-align: left;
  position: relative;
  z-index: var(--z-index-active);
  font: inherit;
}


.nav-option::before {
  content: "";
  display: block;
  width: 0.5rem;
  height: 0.5rem;
  border-radius: 50%;
  background-color: currentColor;
  box-shadow: 0 0 0 0.0625rem currentColor;
  flex: 0 0 auto;
}

.nav-option:hover {
  color: var(--theme-color);
}

.nav-option.active {
  color: var(--text-main);
}

.nav-option.active::before {
  background-color: var(--theme-color);
  box-shadow: 0 0 0.25rem var(--theme-color);
}

.nav-option:focus-visible {
  outline: 0.125rem solid var(--theme-color);
  outline-offset: 0.125rem;
}

#groupNavGliderHover {
  background: color-mix(in srgb, var(--theme-color) 15%, transparent);
  border: var(--border-width) solid color-mix(in srgb, var(--theme-color) 30%, transparent);
  box-shadow:
    0 0 0 var(--border-width) color-mix(in srgb, var(--theme-color) 60%, transparent),
    0 0.5rem 1.125rem -0.875rem var(--theme-color);
}


.content-controls {
  display: flex;
  flex-direction: column;
  align-items: flex-end;
  gap: 0.5rem;
}

.search-bar {
  color: var(--text-main);
  padding: 0.75rem 1.25rem;
  border-radius: 3.125rem;
  width: 18.75rem;
  font-size: 1rem;
  outline: none;
  transition: all 0.2s ease;
}

.search-bar:focus {
  border-color: var(--theme-color);
  box-shadow: 0 0 0 0.1875rem var(--shadow-soft);
}

.content-meta {
  font-size: 0.85rem;
  color: var(--text-muted);
  min-height: 1.2em;
}

.card-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 0.5rem;
}


@container (max-width: 360px) {
  .card-grid {
    grid-template-columns: 1fr;
  }
}


.card-grid-empty {
  grid-column: 1 / -1;
  text-align: center;
  color: var(--text-muted);
  padding: 2rem;
}

.card {
  background-color: color-mix(in srgb, var(--bg-surface) 60%, transparent);
  background-image: var(--noise-pattern);
  backdrop-filter: blur(0.75rem) saturate(150%);
  -webkit-backdrop-filter: blur(0.75rem) saturate(150%);
  border: var(--border-width) solid var(--border-strong);
  border-radius: var(--border-radius-lg);
  padding: 1.5rem;
  display: flex;
  flex-direction: column;
  transition: transform 0.2s, box-shadow 0.2s, border-color 0.2s, background 0.2s;
  position: relative;
  z-index: 0;
  isolation: isolate;
  overflow: hidden;
  box-shadow: 0 0.25rem 0.75rem var(--shadow-soft);

  /* target size */
  width: 100%;
  max-width: 20rem;
  min-height: 12.5rem;
}

.card-bg-svg {
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  z-index: -2;
}


/* Keep card content above the SVG watermark */
.card > :not(.card-bg-svg) {
  position: relative;
  z-index: var(--z-index-base);
}

.card-bg-text {
  /* Monospace / fixed-width watermark */
  font-family:
    ui-monospace,
    "Cascadia Mono",
    "SFMono-Regular",
    "Menlo",
    "Monaco",
    "Consolas",
    "Liberation Mono",
    "Courier New",
    monospace;

  /* Ultra black (best-effort; depends on installed font weights) */
  font-weight: 900;

  /* Monospace fonts are rarely truly condensed; emulate "ultra condensed" */
  font-stretch: ultra-condensed;
  transform-box: fill-box;
  transform-origin: left center;
  transform: scaleX(0.82);

  /* Since we position each glyph explicitly in JS, keep spacing neutral */
  letter-spacing: 0;

  /* Dim bold caps watermark (tinted toward accent) */
  color: color-mix(in srgb, var(--theme-color) 35%, var(--text-muted));
  fill: currentColor;
  opacity: 0.12;

  /* Make it effectively "double weight" by outlining with a matching stroke */
  paint-order: stroke fill;
  stroke: currentColor;
  stroke-width: 2.2px;
}


@container (max-width: 360px) {
  .card {
    max-width: 100%;
  }
}


.card:hover {
  transform: translateY(-0.25rem);
  background-color: color-mix(in srgb, var(--bg-surface) 80%, transparent);
  border-color: var(--theme-color);
  box-shadow: 0 0.5rem 1.5rem var(--shadow-strong);
}

.card::before {
  content: "";
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: linear-gradient(120deg, transparent 30%, rgba(255, 255, 255, 0.4) 50%, transparent 70%);
  transform: translateX(-100%);
  transition: transform 0s;
  z-index: -1;
}

.card:hover::before {
  transform: translateX(100%);
  transition: transform 0.6s;
}

.card-title {
  margin-bottom: 0.5rem;
  font-size: 1.2rem;
  font-weight: 600;
}

.card-link {
  text-decoration: none;
  color: var(--text-main);
  text-overflow: ellipsis;
}

.card-link::after {
  content: "";
  position: absolute;
  inset: 0;
  z-index: var(--z-index-base);
}

.card:hover .card-link {
  color: var(--theme-color);
}

.card-body {
  font-size: 0.9rem;
  color: var(--text-muted);
  margin-bottom: 1rem;
  word-break: break-word;
}

.card-tags {
  margin-top: auto;
  padding: 0;
  list-style: none;
  display: flex;
  flex-wrap: wrap;
  gap: 0.5rem;
}

.card-tag {
  list-style: none;
}

.tag {
  background: color-mix(in srgb, var(--bg-surface) 50%, transparent);
  color: var(--text-muted);
  padding: 0.25rem 0.625rem;
  border-radius: var(--border-radius-sm);
  font-size: 0.75rem;
  cursor: pointer;
  transition: background 0.2s, color 0.2s;
  position: relative;
  z-index: var(--z-index-active);
  border: none;
  font: inherit;
}


.tag:hover {
  background: var(--theme-color);
  color: #ffffff;
}

.tag:focus-visible {
  outline: 0.125rem solid var(--theme-color);
  outline-offset: 0.125rem;
}

.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

@media (max-width: 48rem) {
  .app {
    flex-direction: column;
  }

  .sidebar {
    width: 100%;
    border-right: none;
    border-bottom: var(--border-width) solid var(--border);
  }

  .content {
    padding: 1.5rem;
  }

  .content-header {
    flex-direction: column;
    align-items: flex-start;
    gap: 1rem;
  }

  .content-controls {
    align-items: flex-start;
    width: 100%;
  }

    .search-bar {
    width: 100%;
  }

    /* Keep sidebar header pinned at top on narrow screens */
  .sidebar-header {
    position: sticky;
    top: 0;
  }
}


/* --- Custom color mode controls --- */
#colorModeSwitch {
  --height: 2.375rem;
  /* gap: 0.5rem; */
}

#colorModeSwitch[aria-pressed="false"] #sw-lbl-preset,
#colorModeSwitch[aria-pressed="true"] #sw-lbl-custom {
  color: var(--text-main);
  text-shadow: 0 0.0625rem 0.125rem rgba(0,0,0,0.25);
}

/* selection blob similar to nav__glider-hover but behaves like theme-switch ::before */
#colorModeSwitch::before {
  content: "";
  position: absolute;
  top: var(--pad);
  bottom: var(--pad);
  left: var(--pad);
  width: calc(50% - var(--pad) - (var(--border-width) * 2));
  border-radius: var(--border-radius-md);
  background: color-mix(in srgb, var(--theme-color) 8%, transparent);
  border: var(--border-width) solid color-mix(in srgb, var(--theme-color) 15%, transparent);
  box-shadow:
    0 0 0 var(--border-width) color-mix(in srgb, var(--theme-color) 35%, transparent),
    0 0.5rem 1.125rem -0.875rem var(--theme-color);
  transition: transform var(--transition-spring);
  z-index: var(--z-index-base);
}

#colorModeSwitch[aria-pressed="true"]::before {
  transform: translateX(calc(100% + (var(--border-width) * 2)));
}


/* When custom mode is active, swap preset buttons and mixer without layout shift */
#colorMixerContainer {
  display: flex;
  flex-direction: column;
  gap: 1.25rem;
  margin-top: 0;
  padding: 0.75rem;
  grid-area: 1 / 1;

  visibility: hidden;
  opacity: 0;
  pointer-events: none;
}

#themePickerSet.theme-picker-custom #colorMixerContainer {
  visibility: visible;
  opacity: 1;
  pointer-events: auto;
}

#themePickerSet.theme-picker-custom #themePickerOptions {
  visibility: hidden;
  opacity: 0;
  pointer-events: none;
}

#themePickerSet:not(.theme-picker-custom) #themePickerOptions {
  visibility: visible;
  opacity: 1;
  pointer-events: auto;
}

#themePickerSet:not(.theme-picker-custom) #colorMixerContainer {
  visibility: hidden;
  opacity: 0;
  pointer-events: none;
}

/* In custom mode, hide theme picker gliders (no preset labels visible) */
#themePickerSet.theme-picker-custom #themePickerGlider,
#themePickerSet.theme-picker-custom #themePickerGliderHover {
  opacity: 0;
}



/* sliders (lightweight port from rgb mixer) */
.theme-slider {
  -webkit-appearance: none;
  appearance: none;
  width: 100%;
  height: 0.6rem;
  border-radius: var(--border-radius-sm);
  background: rgba(0,0,0,0.12);
  outline: none;
  transition: background 0.18s;
  box-shadow: inset 0 0.125rem 0.25rem rgba(0,0,0,0.04);
}

/* per-slider accent variables and more prominent track coloring */
#colorSliderRed { --accent: var(--color-red); background: color-mix(in srgb, var(--color-red) 10%, rgba(0,0,0,0.12)); }
#colorSliderGreen { --accent: var(--color-green); background: color-mix(in srgb, var(--color-green) 10%, rgba(0,0,0,0.12)); }
#colorSliderBlue { --accent: var(--color-blue); background: color-mix(in srgb, var(--color-blue) 10%, rgba(0,0,0,0.12)); }

.theme-slider::-webkit-slider-thumb,
.theme-slider::-moz-range-thumb {
  -webkit-appearance: none;
  -moz-appearance: none;
  appearance: none;
  width: 1.25rem;
  height: 1.25rem;
  background: var(--accent, #fff);
  border: 3px solid #fff;
  border-radius: 50%;
  cursor: pointer;
  box-shadow: 0 0.25rem 0.5rem rgba(0,0,0,0.12);
}

@media (max-width: 30rem) {
  .card-grid {
    grid-template-columns: 1fr;
  }

  .card {
    max-width: 100%;
  }
}
/* end custom additions */
